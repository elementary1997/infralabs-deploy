# –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –∫—É—Ä—Å–æ–≤, –º–æ–¥—É–ª–µ–π, —É—Ä–æ–∫–æ–≤, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –∏ –∫–≤–µ—Å—Ç–æ–≤

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –∏–º–ø–æ—Ä—Ç–∞ –∫—É—Ä—Å–æ–≤, –º–æ–¥—É–ª–µ–π, —É—Ä–æ–∫–æ–≤, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –∏ –∫–≤–µ—Å—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

## –≠–∫—Å–ø–æ—Ä—Ç –∫—É—Ä—Å–æ–≤

### –ë–∞–∑–æ–≤—ã–π —ç–∫—Å–ø–æ—Ä—Ç

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã, –º–æ–¥—É–ª–∏, —É—Ä–æ–∫–∏, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏ –∫–≤–µ—Å—Ç—ã:

```bash
./scripts/export-courses.sh
```

–§–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ `./exports/courses_export_YYYYMMDD_HHMMSS.json`

### –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏

**–í–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∫–æ–Ω–æ–∫ (–∫–∞–∫ base64):**

```bash
./scripts/export-courses.sh --include-files
```

**–í–∫–ª—é—á–∏—Ç—å –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**

```bash
./scripts/export-courses.sh --include-unpublished
```

**–£–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É:**

```bash
./scripts/export-courses.sh --output ./backups/my_courses.json
```

**–í—Å–µ –æ–ø—Ü–∏–∏ –≤–º–µ—Å—Ç–µ:**

```bash
./scripts/export-courses.sh --include-files --include-unpublished --output ./backups/full_export.json
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Django management –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é

```bash
docker exec infralabs_web python manage.py export_courses /tmp/export.json

# –° –æ–ø—Ü–∏—è–º–∏
docker exec infralabs_web python manage.py export_courses \
    /tmp/export.json \
    --include-files \
    --include-unpublished
```

## –ò–º–ø–æ—Ä—Ç –∫—É—Ä—Å–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç (—É–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) ‚≠ê

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é** –∏–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "—É–º–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è":
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ, **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ**
- –ù–µ —Ç—Ä–æ–≥–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

```bash
./scripts/import-courses.sh ./exports/courses_export_20250110_120000.json
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º

–£–¥–∞–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –º–æ–¥—É–ª–∏ (ansible-basics, playbooks-roles, advanced-ansible) –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∏/—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è:

```bash
./scripts/import-courses.sh ./exports/courses_export.json --clear-demo
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö

–û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

```bash
./scripts/import-courses.sh ./exports/courses_export.json --update
```

### –ü—Ä–æ–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö

–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (–Ω–µ —Å–æ–∑–¥–∞–µ—Ç –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç):

```bash
./scripts/import-courses.sh ./exports/courses_export.json --skip-existing
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö ID

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫—É—Ä—Å—ã, –º–æ–¥—É–ª–∏, —É—Ä–æ–∫–∏ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è!

```bash
./scripts/import-courses.sh ./exports/courses_export.json --restore-ids
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
./scripts/import-courses.sh ./exports/courses_export.json --update --skip-existing
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Django management –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker cp ./exports/courses_export.json infralabs_web:/tmp/import.json

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
docker exec infralabs_web python manage.py import_courses /tmp/import.json --update

# –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
docker exec infralabs_web rm /tmp/import.json
```

## –§–æ—Ä–º–∞—Ç JSON —Ñ–∞–π–ª–∞

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "metadata": {
    "version": "1.0",
    "export_date": "2025-01-10T12:00:00Z",
    "include_files": false,
    "include_unpublished": false
  },
  "courses": [
    {
      "id": 1,
      "title": "Ansible Basics",
      "slug": "ansible-basics",
      "description": "–û—Å–Ω–æ–≤—ã Ansible",
      "icon": "üéì",
      "icon_file_path": "course_icons/course_1.png",
      "icon_file_data": "base64_encoded_data...",  // —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ --include-files
      "icon_file_name": "course_1.png",
      "order": 0,
      "is_published": true,
      "created_at": "2025-01-01T00:00:00Z",
      "updated_at": "2025-01-10T12:00:00Z",
      "modules": [
        {
          "id": 1,
          "title": "Getting Started",
          "slug": "getting-started",
          "description": "...",
          "difficulty": "beginner",
          "order": 0,
          "icon": "üìö",
          "icon_file_path": "module_icons/module_1.png",
          "icon_file_data": "...",  // —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ --include-files
          "estimated_hours": 5,
          "is_published": true,
          "lessons": [
            {
              "id": 1,
              "title": "Introduction",
              "slug": "introduction",
              "content": "Markdown content...",
              "order": 0,
              "xp_reward": 50,
              "estimated_minutes": 15,
              "is_published": true,
              "exercises": [
                {
                  "id": 1,
                  "title": "First Exercise",
                  "slug": "first-exercise",
                  "description": "...",
                  "instructions": "...",
                  "starter_code": "...",
                  "solution_code": "...",
                  "test_cases": [...],
                  "hints": [...],
                  "xp_reward": 100,
                  "difficulty": "easy",
                  "order": 0,
                  "time_limit_seconds": 300,
                  "max_attempts": 10,
                  "is_published": true
                }
              ],
              "resources": [
                {
                  "id": 1,
                  "title": "Documentation",
                  "resource_type": "link",
                  "url": "https://...",
                  "description": "...",
                  "order": 0
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

**–ù–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –≠–∫—Å–ø–æ—Ä—Ç —Å —Ñ–∞–π–ª–∞–º–∏
./scripts/export-courses.sh --include-files --output /tmp/full_courses.json

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
scp /tmp/full_courses.json user@new-server:/path/to/infralabs-deploy/exports/
```

**–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ò–º–ø–æ—Ä—Ç
./scripts/import-courses.sh ./exports/full_courses.json

# –ò–ª–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
./scripts/import-courses.sh ./exports/full_courses.json --update
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –±—ç–∫–∞–ø (–¥–æ–±–∞–≤–∏—Ç—å –≤ crontab)
0 2 * * * cd /path/to/infralabs-deploy && ./scripts/export-courses.sh --include-files --output ./backups/courses_backup_$(date +\%Y\%m\%d).json
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –±—ç–∫–∞–ø
ls -lh ./backups/courses_backup_*.json

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./scripts/import-courses.sh ./backups/courses_backup_20250110.json --restore-ids
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

```bash
# –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ (—ç–∫—Å–ø–æ—Ä—Ç)
./scripts/export-courses.sh --output /tmp/prod_courses.json

# –ù–∞ staging —Å–µ—Ä–≤–µ—Ä–µ (–∏–º–ø–æ—Ä—Ç —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º)
./scripts/import-courses.sh /tmp/prod_courses.json --update
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### Foreign Keys –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ö—É—Ä—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- –ó–∞—Ç–µ–º –º–æ–¥—É–ª–∏ (—Å–≤—è–∑—å —Å –∫—É—Ä—Å–∞–º–∏)
- –ó–∞—Ç–µ–º —É—Ä–æ–∫–∏ (—Å–≤—è–∑—å —Å –º–æ–¥—É–ª—è–º–∏)
- –ó–∞—Ç–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏ —Ä–µ—Å—É—Ä—Å—ã (—Å–≤—è–∑—å —Å —É—Ä–æ–∫–∞–º–∏)

–ò–º–ø–æ—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- `slug` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –∫—É—Ä—Å–æ–≤
- `slug` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –º–æ–¥—É–ª–µ–π
- `(lesson, slug)` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- `(module, slug)` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è —É—Ä–æ–∫–æ–≤

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–ø—Ü–∏–π.

### ID –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `--restore-ids`:
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ ID –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞
- –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ!

### –§–∞–π–ª—ã –∏–∫–æ–Ω–æ–∫

- –ë–µ–∑ `--include-files`: —Ç–æ–ª—å–∫–æ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- –° `--include-files`: —Ñ–∞–π–ª—ã –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ base64 –∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ JSON
- –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ –æ–Ω–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ JSON

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- –ö—É—Ä—Å—ã: `media/course_icons/`
- –ú–æ–¥—É–ª–∏: `media/module_icons/`

## Troubleshooting

### –û—à–∏–±–∫–∞: duplicate key value violates unique constraint

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--update` –∏–ª–∏ `--skip-existing`:

```bash
./scripts/import-courses.sh file.json --update
```

### –û—à–∏–±–∫–∞: Foreign key constraint failed

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø–æ—Ä—è–¥–∫–µ –∏–º–ø–æ—Ä—Ç–∞. –ö–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JSON —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω.

### –û—à–∏–±–∫–∞: File not found (–¥–ª—è –∏–∫–æ–Ω–æ–∫)

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –±–µ–∑ `--include-files` —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ media –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--include-files` –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ.

### –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏ JSON –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º. –î–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç–∏–µ: `gzip exports/courses_export.json`
- –ò–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –±–µ–∑ —Ñ–∞–π–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ media –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ

## –ü—Ä–∏–º–µ—Ä—ã

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —ç–∫—Å–ø–æ—Ä—Ç-–∏–º–ø–æ—Ä—Ç

```bash
# 1. –≠–∫—Å–ø–æ—Ä—Ç —Å —Ñ–∞–π–ª–∞–º–∏
./scripts/export-courses.sh --include-files --output ./exports/backup.json

# 2. –°–∂–∞—Ç–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
gzip ./exports/backup.json

# 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä
scp ./exports/backup.json.gz user@server:/path/

# 4. –ù–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ: —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞
gunzip backup.json.gz

# 5. –ò–º–ø–æ—Ä—Ç
./scripts/import-courses.sh backup.json
```

### –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab (`crontab -e`):

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00 –Ω–æ—á–∏
0 2 * * * cd /path/to/infralabs-deploy && ./scripts/export-courses.sh --include-files --output ./backups/courses_$(date +\%Y\%m\%d).json

# –£–¥–∞–ª–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
0 3 * * * find /path/to/infralabs-deploy/backups -name "courses_*.json" -mtime +30 -delete
```
